<project 
	xmlns:artifact="antlib:org.apache.maven.artifact.ant"
	name="StrataInject" 
	default="run-commit-stage">

    <property name="sourceDirectory" value="${basedir}/src"/>
    <property name="outputDirectory" value="${basedir}/bin"/>
    <property name="directory" value="${basedir}/lib"/>
    <property name="version" value="DEV"/>
    <property name="artifactName" value="${ant.project.name}-${version}"/>
    <property name="project.artifact" value="${directory}/${artifactName}.jar"/>
    <property name="common.artifact" value="${basedir}/../StrataCommon/lib/StrataCommon-${version}.jar"/>

    <artifact:dependencies pathId="partial.classpath">
    	<artifact:dependency groupId="junit" artifactId="junit" version="4.9"/>
        <artifact:dependency groupId="com.google.inject" artifactId="guice" version="4.0-beta"/>
        <artifact:dependency groupId="javax.inject" artifactId="javax.inject" version="1"/>
        <artifact:dependency groupId="org.springframework" artifactId="spring-core" version="3.0.6.RELEASE"/>
        <artifact:dependency groupId="org.springframework" artifactId="spring-context-support" version="3.0.6.RELEASE"/>
        <artifact:dependency groupId="org.eclipse" artifactId="swt.win32.win32.x86_64" version="3.6.1"/>
        <artifact:dependency groupId="org.mockito" artifactId="mockito-all" version="1.9.0"/>
    </artifact:dependencies>

    <path 
        id="dependency.classpath">
        <pathelement location="${common.artifact}" /> 
        <path refid="partial.classpath"/> 
    </path>
	
    <target name="clean">
        <delete dir="${outputDirectory}"/>
    	<delete file="${project.artifact}"/>
    </target>
    
    <target name="init">
        <mkdir dir="${outputDirectory}"/>
    </target>
	
	<target 
		name="compile" 
		depends="init">
		<javac 
			srcdir="${sourceDirectory}" 
			destdir="${outputDirectory}" 
			classpathref="dependency.classpath" 
			compiler="javac1.7"
			includeantruntime="false"/>
	</target>
	
	<target
	    name="package"
	    depends="compile">
	    <jar 
	    	destfile="${project.artifact}"
		    basedir="${outputDirectory}"/>
	</target>
	
	<target 
		name="run-commit-stage"
		depends="package">
	</target>
	
    <target 
        name="run-integration-stage"
    	depends="init">
    </target>
    
</project>	