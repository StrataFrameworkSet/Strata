create table dbo.Trade (TradeKey BIGINT IDENTITY NOT NULL, Version INT not null, TradeId INT not null unique, ExternalTradeId INT not null, Cusip NVARCHAR(255) not null, TransactionType INT not null, PriceCurrency NVARCHAR(255) null, PriceAmount DECIMAL(19,5) null, TradeCurrency NVARCHAR(255) null, TradeAmount DECIMAL(19,5) null, TraderId INT not null, BrokerCode NVARCHAR(255) not null, TradeDate DATETIME not null, SettlementDate DATETIME not null, DeliveryDate DATETIME not null, primary key (TradeKey))
create table dbo.AccountAllocation (AccountAllocationKey BIGINT IDENTITY NOT NULL, Version INT not null, AccountAllocationId INT not null unique, TradeId INT null, DownstreamAllocationIdOriginal INT not null, DownstreamAllocationIdLatest INT not null, ExternalAccountAllocationId INT not null, AccountCode NVARCHAR(255) not null, AccountCurrency NVARCHAR(255) null, AccountAmount DECIMAL(19,5) null, Comment NVARCHAR(255) not null, TradeKey BIGINT null, ListIndex INT null, primary key (AccountAllocationKey))
create table dbo.ManagerAllocation (ManagerAllocationKey BIGINT IDENTITY NOT NULL, Version INT not null, ManagerAllocationId INT not null unique, AccountAllocationId INT null, ManagerId INT not null, ManagerCurrency NVARCHAR(255) null, ManagerAmount DECIMAL(19,5) null, AccountAllocationKey BIGINT null, ListIndex INT null, primary key (ManagerAllocationKey))
alter table dbo.AccountAllocation add constraint FK93DEB807F80DB01F foreign key (TradeKey) references dbo.Trade
alter table dbo.ManagerAllocation add constraint FKC4C99F02E8D81083 foreign key (AccountAllocationKey) references dbo.AccountAllocation
